"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.XML_Formatting_Options = exports.Processing_Instruction = exports.XML_Node = exports.XML_Text_Content = exports.XML_Content = exports.XML_Attributes = exports.XML_Element = exports.XML_Document = void 0;
const pa = __importStar(require("exupery-core-alg"));
const sh = __importStar(require("pareto-fountain-pen/dist/shorthands/block"));
const to_list_sorted_by_code_point_1 = require("pareto-standard-operations/dist/operations/impure/dictionary/to_list_sorted_by_code_point");
// XML Schema Type transformations - each type from the schema needs a function
const XML_Document = ($, $p) => {
    // For now, let's create a simple block content and return it as Group_Part converted to Block
    const content = sh.g.sub([
        // XML Declaration
        $.declaration.transform((decl) => sh.g.nested_block([
            sh.b.snippet("<?xml version=\""),
            sh.b.snippet(escapeXmlAttribute(decl.version)),
            sh.b.snippet("\""),
            decl.encoding.transform((enc) => sh.b.sub([
                sh.b.snippet(" encoding=\""),
                sh.b.snippet(escapeXmlAttribute(enc)),
                sh.b.snippet("\"")
            ]), () => sh.b.nothing()),
            decl.standalone.transform((standalone) => sh.b.sub([
                sh.b.snippet(" standalone=\""),
                sh.b.snippet(standalone ? "yes" : "no"),
                sh.b.snippet("\"")
            ]), () => sh.b.nothing()),
            sh.b.snippet("?>")
        ]), () => sh.g.nothing()),
        // Processing Instructions (before root)
        sh.g.sub($['processing instructions'].map((pi) => (0, exports.Processing_Instruction)(pi, $p))),
        // Root Element
        (0, exports.XML_Element)($['root element'], $p)
    ]);
    // Convert Group_Part to Block (temporary approach)
    return content;
};
exports.XML_Document = XML_Document;
const XML_Element = ($, $p) => {
    const elementName = $.prefix.transform((prefix) => prefix + ":" + $.name, () => $.name);
    const hasContent = pa.cc($.content, (content) => {
        switch (content[0]) {
            case 'empty': return pa.ss(content, () => false);
            case 'text only': return pa.ss(content, () => true);
            case 'elements only': return pa.ss(content, (elements) => Object.keys(elements).length > 0);
            case 'mixed': return pa.ss(content, (nodes) => Object.keys(nodes).length > 0);
            default: return pa.au(content[0]);
        }
    });
    return pa.cc($p.formatting, (formatting) => {
        switch (formatting[0]) {
            case 'compact': return pa.ss(formatting, () => $['self closing'] && !hasContent
                ? sh.g.nested_block([
                    sh.b.snippet("<"),
                    sh.b.snippet(elementName),
                    (0, exports.XML_Attributes)($.attributes),
                    sh.b.snippet("/>")
                ])
                : sh.g.sub([
                    sh.g.nested_block([
                        sh.b.snippet("<"),
                        sh.b.snippet(elementName),
                        (0, exports.XML_Attributes)($.attributes),
                        sh.b.snippet(">")
                    ]),
                    (0, exports.XML_Content)($.content, $p),
                    sh.g.nested_block([
                        sh.b.snippet("</"),
                        sh.b.snippet(elementName),
                        sh.b.snippet(">")
                    ])
                ]));
            case 'pretty': return pa.ss(formatting, (pretty) => $['self closing'] && !hasContent
                ? sh.g.nested_block([
                    sh.b.snippet("<"),
                    sh.b.snippet(elementName),
                    (0, exports.XML_Attributes)($.attributes),
                    sh.b.snippet(" />")
                ])
                : sh.g.sub([
                    sh.g.nested_block([
                        sh.b.snippet("<"),
                        sh.b.snippet(elementName),
                        (0, exports.XML_Attributes)($.attributes),
                        sh.b.snippet(">")
                    ]),
                    sh.g.sub([
                        (0, exports.XML_Content)($.content, $p)
                    ]),
                    sh.g.nested_block([
                        sh.b.snippet("</"),
                        sh.b.snippet(elementName),
                        sh.b.snippet(">")
                    ])
                ]));
            case 'custom': return pa.ss(formatting, (custom) => $['self closing'] && !hasContent
                ? sh.g.nested_block([
                    custom['before element'].transform((before) => sh.b.snippet(before), () => sh.b.nothing()),
                    sh.b.snippet("<"),
                    sh.b.snippet(elementName),
                    (0, exports.XML_Attributes)($.attributes),
                    sh.b.snippet("/>"),
                    custom['after element'].transform((after) => sh.b.snippet(after), () => sh.b.nothing())
                ])
                : sh.g.sub([
                    sh.g.nested_block([
                        custom['before element'].transform((before) => sh.b.snippet(before), () => sh.b.nothing()),
                        sh.b.snippet("<"),
                        sh.b.snippet(elementName),
                        (0, exports.XML_Attributes)($.attributes),
                        sh.b.snippet(">")
                    ]),
                    (0, exports.XML_Content)($.content, $p),
                    sh.g.nested_block([
                        sh.b.snippet("</"),
                        sh.b.snippet(elementName),
                        sh.b.snippet(">"),
                        custom['after element'].transform((after) => sh.b.snippet(after), () => sh.b.nothing())
                    ])
                ]));
            default: return pa.au(formatting[0]);
        }
    });
};
exports.XML_Element = XML_Element;
const XML_Attributes = (attributes) => {
    return sh.b.sub((0, to_list_sorted_by_code_point_1.$$)(attributes).map(($) => sh.b.sub([
        sh.b.snippet(" "),
        sh.b.snippet($.key),
        sh.b.snippet("=\""),
        sh.b.snippet(escapeXmlAttribute($.value.value)),
        sh.b.snippet("\"")
    ])));
};
exports.XML_Attributes = XML_Attributes;
const XML_Content = ($, $p) => pa.cc($, (content) => {
    switch (content[0]) {
        case 'empty': return pa.ss(content, () => sh.g.nothing());
        case 'text only': return pa.ss(content, (textContent) => (0, exports.XML_Text_Content)(textContent, $p));
        case 'elements only': return pa.ss(content, (elements) => sh.g.sub(elements.map((element) => (0, exports.XML_Element)(element, $p))));
        case 'mixed': return pa.ss(content, (nodes) => sh.g.sub(nodes.map((node) => (0, exports.XML_Node)(node, $p))));
        default: return pa.au(content[0]);
    }
});
exports.XML_Content = XML_Content;
const XML_Text_Content = ($, $p) => {
    return pa.cc($.escape, (escapeType) => {
        switch (escapeType[0]) {
            case 'auto': return pa.ss(escapeType, () => sh.g.nested_block([sh.b.snippet(escapeXmlText($.value))]));
            case 'cdata': return pa.ss(escapeType, () => sh.g.nested_block([
                sh.b.snippet("<![CDATA["),
                sh.b.snippet($.value),
                sh.b.snippet("]]>")
            ]));
            case 'none': return pa.ss(escapeType, () => sh.g.nested_block([sh.b.snippet($.value)]));
            default: return pa.au(escapeType[0]);
        }
    });
};
exports.XML_Text_Content = XML_Text_Content;
const XML_Node = ($, $p) => pa.cc($, (node) => {
    switch (node[0]) {
        case 'element': return pa.ss(node, (element) => (0, exports.XML_Element)(element, $p));
        case 'text': return pa.ss(node, (text) => (0, exports.XML_Text_Content)(text, $p));
        case 'comment': return pa.ss(node, (comment) => sh.g.nested_block([
            sh.b.snippet("<!-- "),
            sh.b.snippet(comment.content),
            sh.b.snippet(" -->")
        ]));
        case 'cdata': return pa.ss(node, (cdata) => sh.g.nested_block([
            sh.b.snippet("<![CDATA["),
            sh.b.snippet(cdata.content),
            sh.b.snippet("]]>")
        ]));
        case 'processing instruction': return pa.ss(node, (pi) => (0, exports.Processing_Instruction)(pi, $p));
        default: return pa.au(node[0]);
    }
});
exports.XML_Node = XML_Node;
const Processing_Instruction = ($, $p) => {
    return sh.g.nested_block([
        sh.b.snippet("<?"),
        sh.b.snippet($.target),
        $.data.transform((data) => sh.b.sub([
            sh.b.snippet(" "),
            sh.b.snippet(data)
        ]), () => sh.b.nothing()),
        sh.b.snippet("?>")
    ]);
};
exports.Processing_Instruction = Processing_Instruction;
const XML_Formatting_Options = ($, $p) => {
    return pa.cc($, (formatting) => {
        switch (formatting[0]) {
            case 'compact': return pa.ss(formatting, () => sh.g.nested_block([sh.b.snippet("compact formatting")]));
            case 'pretty': return pa.ss(formatting, (pretty) => sh.g.nested_block([sh.b.snippet("pretty formatting with indent: " + pretty.indent)]));
            case 'custom': return pa.ss(formatting, (custom) => sh.g.nested_block([sh.b.snippet("custom formatting")]));
            default: return pa.au(formatting[0]);
        }
    });
};
exports.XML_Formatting_Options = XML_Formatting_Options;
// XML escaping helper functions
const escapeXmlText = (text) => {
    return text
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
};
const escapeXmlAttribute = (text) => {
    return text
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&apos;');
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm91bnRhaW5fcGVuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3RyYW5zZm9ybWF0aW9ucy94bWwvZm91bnRhaW5fcGVuLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEscURBQXNDO0FBTXRDLDhFQUErRDtBQUUvRCw0SUFBdUk7QUFFdkksK0VBQStFO0FBQ3hFLE1BQU0sWUFBWSxHQUFHLENBQ3hCLENBQW9CLEVBQ3BCLEVBRUMsRUFDVSxFQUFFO0lBQ2IsOEZBQThGO0lBQzlGLE1BQU0sT0FBTyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ3JCLGtCQUFrQjtRQUNsQixDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FDbkIsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO1lBQ3hCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDO1lBQ2hDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM5QyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDbEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQ25CLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztnQkFDZCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUM7Z0JBQzVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNyQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7YUFDckIsQ0FBQyxFQUNGLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQ3ZCO1lBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQ3JCLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztnQkFDckIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7Z0JBQzlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQzthQUNyQixDQUFDLEVBQ0YsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FDdkI7WUFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7U0FDckIsQ0FBQyxFQUNGLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQ3ZCO1FBRUQsd0NBQXdDO1FBQ3hDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQzdDLElBQUEsOEJBQXNCLEVBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUNqQyxDQUFDO1FBRUYsZUFBZTtRQUNmLElBQUEsbUJBQVcsRUFBQyxDQUFDLENBQUMsY0FBYyxDQUFDLEVBQUUsRUFBRSxDQUFDO0tBQ3JDLENBQUMsQ0FBQTtJQUVGLG1EQUFtRDtJQUNuRCxPQUFPLE9BQWMsQ0FBQTtBQUN6QixDQUFDLENBQUE7QUE5Q1ksUUFBQSxZQUFZLGdCQThDeEI7QUFFTSxNQUFNLFdBQVcsR0FBRyxDQUN2QixDQUFtQixFQUNuQixFQUVDLEVBQ2UsRUFBRTtJQUNsQixNQUFNLFdBQVcsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FDbEMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFDakMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDZixDQUFBO0lBRUQsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUU7UUFDNUMsUUFBUSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNqQixLQUFLLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDaEQsS0FBSyxXQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ25ELEtBQUssZUFBZSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUE7WUFDM0YsS0FBSyxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQTtZQUM3RSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDckMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFBO0lBRUYsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxVQUFVLEVBQUUsRUFBRTtRQUN2QyxRQUFRLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3BCLEtBQUssU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FDMUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVTtnQkFDNUIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO29CQUNoQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7b0JBQ2pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztvQkFDekIsSUFBQSxzQkFBYyxFQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7b0JBQzVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztpQkFDckIsQ0FBQztnQkFDRixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7b0JBQ1AsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7d0JBQ2QsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO3dCQUNqQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7d0JBQ3pCLElBQUEsc0JBQWMsRUFBQyxDQUFDLENBQUMsVUFBVSxDQUFDO3dCQUM1QixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7cUJBQ3BCLENBQUM7b0JBQ0YsSUFBQSxtQkFBVyxFQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDO29CQUMxQixFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQzt3QkFDZCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7d0JBQ2xCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQzt3QkFDekIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO3FCQUNwQixDQUFDO2lCQUNMLENBQUMsQ0FDVCxDQUFBO1lBQ0QsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FDL0MsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVTtnQkFDNUIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO29CQUNoQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7b0JBQ2pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztvQkFDekIsSUFBQSxzQkFBYyxFQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7b0JBQzVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztpQkFDdEIsQ0FBQztnQkFDRixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7b0JBQ1AsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7d0JBQ2QsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO3dCQUNqQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7d0JBQ3pCLElBQUEsc0JBQWMsRUFBQyxDQUFDLENBQUMsVUFBVSxDQUFDO3dCQUM1QixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7cUJBQ3BCLENBQUM7b0JBQ0YsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7d0JBQ0wsSUFBQSxtQkFBVyxFQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDO3FCQUM3QixDQUFDO29CQUNGLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO3dCQUNkLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQzt3QkFDbEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO3dCQUN6QixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7cUJBQ3BCLENBQUM7aUJBQ0wsQ0FBQyxDQUNULENBQUE7WUFDRCxLQUFLLFFBQVEsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUMvQyxDQUFDLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxVQUFVO2dCQUM1QixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7b0JBQ2hCLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFNBQVMsQ0FDOUIsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUNoQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUN2QjtvQkFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7b0JBQ2pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztvQkFDekIsSUFBQSxzQkFBYyxFQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7b0JBQzVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztvQkFDbEIsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFNBQVMsQ0FDN0IsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUM5QixHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUN2QjtpQkFDSixDQUFDO2dCQUNGLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztvQkFDUCxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQzt3QkFDZCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxTQUFTLENBQzlCLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFDaEMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FDdkI7d0JBQ0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO3dCQUNqQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7d0JBQ3pCLElBQUEsc0JBQWMsRUFBQyxDQUFDLENBQUMsVUFBVSxDQUFDO3dCQUM1QixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7cUJBQ3BCLENBQUM7b0JBQ0YsSUFBQSxtQkFBVyxFQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDO29CQUMxQixFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQzt3QkFDZCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7d0JBQ2xCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQzt3QkFDekIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO3dCQUNqQixNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsU0FBUyxDQUM3QixDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQzlCLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQ3ZCO3FCQUNKLENBQUM7aUJBQ0wsQ0FBQyxDQUNULENBQUE7WUFDRCxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDeEMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBakhZLFFBQUEsV0FBVyxlQWlIdkI7QUFFTSxNQUFNLGNBQWMsR0FBRyxDQUMxQixVQUE2QyxFQUM3QixFQUFFO0lBQ2xCLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQ1gsSUFBQSxpQ0FBcUIsRUFBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ2xELEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUNqQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ25CLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztRQUNuQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztLQUNyQixDQUFDLENBQUMsQ0FDTixDQUFBO0FBQ0wsQ0FBQyxDQUFBO0FBWlksUUFBQSxjQUFjLGtCQVkxQjtBQUVNLE1BQU0sV0FBVyxHQUFHLENBQ3ZCLENBQW1CLEVBQ25CLEVBRUMsRUFDZSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRTtJQUN4QyxRQUFRLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ2pCLEtBQUssT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7UUFDekQsS0FBSyxXQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FDcEQsSUFBQSx3QkFBZ0IsRUFBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQ3BDLENBQUE7UUFDRCxLQUFLLGVBQWUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUNyRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxJQUFBLG1CQUFXLEVBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDaEUsQ0FBQTtRQUNELEtBQUssT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQzFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUEsZ0JBQVEsRUFBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNwRCxDQUFBO1FBQ0QsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ3JDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQTtBQW5CVyxRQUFBLFdBQVcsZUFtQnRCO0FBRUssTUFBTSxnQkFBZ0IsR0FBRyxDQUM1QixDQUF3QixFQUN4QixFQUVDLEVBQ2UsRUFBRTtJQUNsQixPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFO1FBQ2xDLFFBQVEsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDcEIsS0FBSyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUN2QyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQzdELENBQUE7WUFDRCxLQUFLLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQ3hDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO2dCQUNkLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztnQkFDekIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDckIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO2FBQ3RCLENBQUMsQ0FDTCxDQUFBO1lBQ0QsS0FBSyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUN2QyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQzlDLENBQUE7WUFDRCxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDeEMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBeEJZLFFBQUEsZ0JBQWdCLG9CQXdCNUI7QUFFTSxNQUFNLFFBQVEsR0FBRyxDQUNwQixDQUFnQixFQUNoQixFQUVDLEVBQ2UsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7SUFDckMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNkLEtBQUssU0FBUyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsSUFBQSxtQkFBVyxFQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQ3pFLEtBQUssTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBQSx3QkFBZ0IsRUFBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNyRSxLQUFLLFNBQVMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUMzQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQztZQUNkLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztZQUNyQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO1lBQzdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztTQUN2QixDQUFDLENBQ0wsQ0FBQTtRQUNELEtBQUssT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO1lBQ2QsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1lBQ3pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7WUFDM0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO1NBQ3RCLENBQUMsQ0FDTCxDQUFBO1FBQ0QsS0FBSyx3QkFBd0IsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUNyRCxJQUFBLDhCQUFzQixFQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FDakMsQ0FBQTtRQUNELE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUE7QUE1QlcsUUFBQSxRQUFRLFlBNEJuQjtBQUVLLE1BQU0sc0JBQXNCLEdBQUcsQ0FDbEMsQ0FBOEIsRUFDOUIsRUFFQyxFQUNlLEVBQUU7SUFDbEIsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQztRQUNyQixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDbEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUN0QixDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FDWixDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFDZixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDakIsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1NBQ3JCLENBQUMsRUFDRixHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUN2QjtRQUNELEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztLQUNyQixDQUFDLENBQUE7QUFDTixDQUFDLENBQUE7QUFsQlksUUFBQSxzQkFBc0IsMEJBa0JsQztBQUVNLE1BQU0sc0JBQXNCLEdBQUcsQ0FDbEMsQ0FBOEIsRUFDOUIsRUFFQyxFQUNlLEVBQUU7SUFDbEIsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxFQUFFO1FBQzNCLFFBQVEsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDcEIsS0FBSyxTQUFTLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUMxQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUMzRCxDQUFBO1lBQ0QsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FDL0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxpQ0FBaUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUN4RixDQUFBO1lBQ0QsS0FBSyxRQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FDL0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FDMUQsQ0FBQTtZQUNELE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN4QyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUE7QUFDTixDQUFDLENBQUE7QUFwQlksUUFBQSxzQkFBc0IsMEJBb0JsQztBQUVELGdDQUFnQztBQUNoQyxNQUFNLGFBQWEsR0FBRyxDQUFDLElBQVksRUFBVSxFQUFFO0lBQzNDLE9BQU8sSUFBSTtTQUNOLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDO1NBQ3RCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDO1NBQ3JCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUE7QUFDOUIsQ0FBQyxDQUFBO0FBRUQsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLElBQVksRUFBVSxFQUFFO0lBQ2hELE9BQU8sSUFBSTtTQUNOLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDO1NBQ3RCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDO1NBQ3JCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDO1NBQ3JCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDO1NBQ3ZCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUE7QUFDaEMsQ0FBQyxDQUFBIn0=